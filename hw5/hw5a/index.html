<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Homework 5a</title>
	<style>
    html, body {
        margin: 0;
        padding: 0;
        border: 0;
        background-color: #b568e2;
    }

    body {
        padding: 2%;
        font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
    }

    #amicable {
        border-color: black;
        border: solid;
        margin-right: 5%;
        margin-left: 5%;
        text-align: center;
        box-sizing: border-box;
        background-color: #d5a6f0;
    }

    input { 
        text-align: center; 
    }

    .button {
        padding: .75%;
        margin-top: 1%;
        background-color: black;
        color: #ffffff;
        font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
        font-size: 100%;
    }

	</style>
</head>
<body>
    <script language="javascript" type="text/javascript"> 
        function testAmicable() {
            // get numbers
            var num1 = document.getElementById("form_num1").value;
            var num2 = document.getElementById("form_num2").value;
            var factors1 = getFactors(num1);
            var factors2 = getFactors(num2);
            var sum1 = addFactors(factors1);
            var sum2 = addFactors(factors2);

            // check valid input
            if (num1 == "" || num2 == "") {
                alert("bad input");
            } 

            // display steps
            showFactors(factors1, "factors1");
            showFactors(factors2, "factors2");
            document.getElementById("num1").innerHTML = num1;
            document.getElementById("sum1").innerHTML = sum1;
            document.getElementById("num2").innerHTML = num2;
            document.getElementById("sum2").innerHTML = sum2;
            
            // determine results
            var result;
            if (num1 == sum2 && num2 == sum1) {
                result = "are amicable.";
            } else {
                result = "are not amicable.";
            }
            document.getElementById("result").innerHTML = result;
            document.getElementById("res_num1").innerHTML = num1;
            document.getElementById("res_num2").innerHTML = num2;

            document.getElementById("testing").style = "visibility: visible;";

            // testing functions
            // test_isFactor();
            // test_showFactors();
            // test_addFactors();
            // test_getFactors();
        }

        function isFactor(num, test_factor) {
            if (num % test_factor == 0) {
                return true;
            } else {
                return false;
            }
        }

        function showFactors(factors, id) {
            var factor_string = "";
            for (var i = 0; i < factors.length; i++) {
                factor_string += factors[i];
                if (i < factors.length - 1) {
                    factor_string += ", ";
                }
            }
            document.getElementById(id).innerHTML = factor_string;
        }

        function addFactors(factors) {
            var sum = 0;
            for (var i = 0; i < factors.length; i++) {
                sum += factors[i];
            }
            return sum;
        }

        function getFactors(num) {
            var factors = [];
            for (var i = 0; i < num; i++) {
                if (isFactor(num, i)) {
                    factors.push(i);
                }
            }
            return factors;
        }

        // testing functions 
        // function test_isFactor() {
        //     var num = 60;
        //     for (i = 0; i < num; i++) {
        //         console.log(num + " has factor " + i + ": " + isFactor(num, i));
        //     }

        //     num = 13;
        //     for (i = 0; i < num; i++) {
        //         console.log(num + " has factor " + i + ": " + isFactor(num, i));
        //     }
        // }

        // function test_showFactors() {
        //     var a1 = [];
        //     var a2 = [1, 2, 3, 4, 5, 6];
        //     var a3 = [6, 2, 4];
        //     showFactors(a1, "factors1");
        //     showFactors(a2, "factors1");
        //     showFactors(a3, "factors2");
        // }

        // function test_addFactors() {
        //     var a1 = [];
        //     var a2 = [1, 2, 3, 4, 5, 6];
        //     var a3 = [4, 6, 2];
        //     var a = [a1, a2, a3];
        //     for (var i = 0; i < a.length; i++) {
        //         console.log("factors sum: " + addFactors(a[i]));
        //     }
        // }

        // function test_getFactors() {
        //     for (var i = 0; i <= 10; i++) {
        //         console.log("Factors of " + i + ": ");
        //         console.log(getFactors(i));
        //     }
        // }
    </script>

    <div id="amicable"> 
        <h1>Amicable Numbers</h1>

        <form method="get">
        Enter two numbers:<br>
        <input id="form_num1" type="text" name="num1"><br>
        <input id="form_num2" type="text" name="num2"><br>
        <input class="button" type="button" onclick="testAmicable()" value="Test"></input>
        </form>

        </br>

        <div id="testing" style="visibility: hidden;">
            <div> Input number 
                <span id="num1"></span> has factors [
                <span id="factors1"></span> ] that sum to 
                <span id="sum1"></span>. 
            </div>

            <div> Input number 
                <span id="num2"></span> has factors [
                <span id="factors2"></span> ] that sum to 
                <span id="sum2"></span>. 
            </div>

            <h3 id="result_phrase">
                Result: 
                <span id="res_num1"></span> and 
                <span id="res_num2"></span>
                <span id="result"></span>
            </h3>
        </div>
    </div>
</body>
</html>