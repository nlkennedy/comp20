
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Homework 4</title>
	<style>
    html, body {
      margin: 0;
      padding: 0;
      border: 0;
    }

    body {
      font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
      text-align: center;
    }

    #lottery {
      background-color: rgb(252, 201, 237);
      padding: 2%;
    }
    
    #joes {
      background-color: rgb(201, 252, 210);
      padding: 2%;
    }

    #divider {
      background-color: #000000;
      padding: 2px;
    }

    .button {
      padding: .75%;
      margin-top: 1%;
      background-color: black;
      color: #ffffff;
      font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
      font-size: 100%;
    }

    input { 
        text-align: center; 
    }
	</style>
</head>
<body>
  <div id="lottery">
    <h1>Quick Pick for Mass Lottery Lucky for Life</h1>

    <script language="javascript" type="text/javascript"> 
      // display the quick pick
      var nums_ans = random_unique(48, 5);
      document.write("Balls: ");
      display(nums_ans);

      nums_ans.sort(function(a, b){return a-b});
      var lucky_ans = rand(18);

      document.write("Sorted balls: ");
      display(nums_ans);

      document.write("Lucky ball: " + lucky_ans + "<br>");
      document.write("<br>");

      // display an array with spaces and commas between elements
      function display(array) {
        for (i = 0; i < array.length; i++) {
          document.write(array[i] + " ");
        }
        document.write("<br>");
      }

      // return a random integer from 1 to max
      function rand(max) {
        return Math.round(Math.random() * max + 1);
      }

      // return an array of unique random integers
      function random_unique(max, length) {
        var rand_uniq = []
        while(rand_uniq.length < length){
          var random = rand(max);
          if (rand_uniq.indexOf(random) == -1) {
            rand_uniq.push(random);
          }
        }
        return rand_uniq;
      }

      // get the input lottery numbers
      function parseInput() {
        lucky_input = document.getElementById("lucky").value;
        num_input = document.getElementById("five_num").value.split(" ");

        // validate input
        if (num_input.length != 5) {
          alert("Bad input: Please enter 5 numbers only separated by a space");
        }
        for (var i in num_input) {
          if (isNaN(i)) {
            alert("Bad input: Please enter numbers only");
          }
        }
        if (isNaN(lucky_input)) {
          alert("Bad input: Please enter numbers only");
        }

        payout(num_input, lucky_input);
      }

      // calculate how many lottery ball matches 
      function detect_matches(num_input) {
        num_match = 0;
        for (i = 0; i < 5; i++) {
          for (j = 0; j < 5; j++) {
            if (num_input[i] == nums_ans[j]) {
              num_match++;
            }
          }
        }
        return num_match;
      }

      // determine the lottery reward quantity and display
      function payout(num_input, lucky_input) {
        luck_match = (lucky_input == lucky_ans);
        num_match = detect_matches(num_input);

        if (luck_match) {
          switch (num_match) {
            case 0: 
              text = "$4";
              break;
            case 1: 
              text = "$6";
              break;
            case 2: 
              text = "$25";
              break;
            case 3: 
              text = "$150";
              break;
            case 4: 
              text = "$5,000";
              break;
            case 5: 
              text = "$7,000 a WEEK for LIFE!";
              break;
          }
        } else {
          switch (num_match) {
            case 2: 
              text = "$3";
              break;
            case 3: 
              text = "$20";
              break;
            case 4: 
              text = "$200";
              break;
            case 5: 
              text = "$25,000 a YEAR for LIFE!";
              break;
            default: 
              text = "No reward";
          }
        }
  
        document.getElementById("result").innerHTML = "You won: " + text;
      }
    </script>

    <form method="get">
      Enter 5 numbers between 1 and 48 separated by spaces:<br>
      <input id="five_num" type="text" name="five_num"><br>
      Enter one lucky ball number between 1 and 18:<br>
      <input id="lucky" type="text" name="lucky"><br>
      <input class="button" type="button" onclick="parseInput()" value="Play"></input>
    </form>

    <h4>Result: </h4>
    <h3 id="result"></h3>
  </div>

	<div id="divider"></div>

  <div id="joes">
    <h1>Joeâ€™s Hotdogs</h1>

    <form method="get">
      <h3>Place your order: </h3>
      <div id="form_fields"></div>
      <input class="button" type="button" onclick="getOrder()" value="Order"></input>
    </form>
    
    <script>
      // declare menu
      var menu = [];
      menu["Hotdogs"] = 3.25;
      menu["Fries"] = 2.00;
      menu["Drinks"] = 1.50;

      var form = document.getElementById("form_fields");
      for (var i in menu) {
        form.innerHTML += i + " ($" + menu[i].toFixed(2) + "):<br>"; 
        form.innerHTML += "<input id='form_" + i + "' type='text' name='" + i + "'><br>";
      }

      // get the input order quantities
      function getOrder() {
        var order = [];
        for (var i in menu) {
          order[i] = document.getElementById("form_" + i).value;
          if (order[i] == "") {
            order[i] = 0;
          } 
        }

        // validate order
        for (var i in order) {
          if (isNaN(order[i])) {
            alert("Bad input: Please enter three numbers only");
          }
        }
        calculateOrder(order);
      }

      // calculate and display the order total 
      function calculateOrder(order) {
        // calculate costs
        var subtotal = 0;
        for (var i in menu) {
          subtotal += menu[i] * order[i];
        }

        var discount = 0;
        var reduced = subtotal;
        if (subtotal >= 20) {
          discount = subtotal * 0.1;
          reduced -= discount;
        }
        
        var tax = reduced * 0.0625;
        var total = reduced + tax;

        // display costs
        document.getElementById("order_subtotal").innerHTML = "Subtotal: $" + subtotal.toFixed(2);
        document.getElementById("order_discount").innerHTML = "Discount: $" + discount.toFixed(2);
        document.getElementById("order_reduced").innerHTML = "Reduced Total: $" + reduced.toFixed(2);
        document.getElementById("order_tax").innerHTML = "Tax: $" + tax.toFixed(2);
        document.getElementById("order_total").innerHTML = "$" + total.toFixed(2);

        // display quantities
        for (var i in order) {
          document.getElementById("order_" + i).innerHTML = i + ": " + order[i];
        }
      }

    </script>

    <p id="total">

      <h4>Items ordered: </h4>
      <div id="order_Hotdogs">Hotdogs: </div>
      <div id="order_Fries">Fries: </div>
      <div id="order_Drinks">Drinks: </div>

      <h4>Cost: </h4>
      
      <div id="order_subtotal">Subtotal:</div>
      <div id="order_discount">Discount:</div>
      <div id="order_reduced">Reduced Total:</div>
      <div id="order_tax">Tax:</div>
      <h4>Total: </h4>
      <h3 id="order_total"></h3>
    </p>
  </div>

</body>
</html>